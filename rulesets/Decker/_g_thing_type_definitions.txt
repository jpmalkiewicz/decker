// creates all the thing types. things are pieces of hardware, chips, programs and source codes
// every thing in the game has a thing type

english
	GLOBAL.PLAYER = HUMAN	
	
	RULESET.humanActionModifier = FUNCTION (human,stealth_action)        // is stealth_action is false it can be omitted
		return_value = DECK_LOAD_MODIFIER[human.deck] - human.deck.damage/8 - MIN(human.physical_damage,human.mental_damage)/4
		if human.current_node.smoke_level > 0
			return_value = return_value + ( stealth_action ? 4 : -4 )
		
	
	RULESET.humanRatingAttack = FUNCTION (human)
		return_value = humanActionModifier(human) + MIN(human.deck.attack,human.deck.cpu) + human.attack
		i = human.deck.program.size-1
		while i >= 0
			if human.deck.program[i].attack_modifier != UNDEFINED
				return_value = return_value + human.deck.program[i].attack_modifier


	RULESET.actionHumanAttackICE = FUNCTION (ice,program,target_number)
		successes = ROLL_DICE(target_number)
		if successes < 0
			print program.name + " program missed"
		else
			print program.name + " program does " + successes*successes*HEALTH_INCREMENT + "% damage to " + ice.name
			ice.damage = ice.damage + successes*successes
			if ice.damage >= LETHAL_DAMAGE
				actionCrashICE(human,ice)
		human.time = human.time + 1       // an action has been taken, advance the time

	
	RULESET.actionCrashICE = FUNCTION (ice)
		if ice.node == PLAYER.node
			print "<#success>" + ice.name + " has crashed"
			if PLAYER.current_target == ice
				PLAYER.current_target = UNDEFINED
			delete(ice.node.objects,ARRAY_INDEX(ice.node.objects,ice))
			// if the ice is a tapeworm it dies never to come back. otherwise it goes to the ice respawn list
			if ice.guards != UNDEFINED && ice.guards.structure_type == "FILE"
				delete(ice)
			else
				ice.node.area.destroyed_ice[] = ice
			


	RULESET.PROGRAM_TYPES = ARRAY
		THING_TYPE
			type_name = "Attack"
			rating = 1
			cost = FUNCTION (thing)
				return_value = 2 * thing.level * thing.level * 25
			size = FUNCTION (thing)
				return_value = 2 * thing.level
			category = ARRAY
				PROGRAM
				ATTACK_PROGRAM
			default_name = ARRAY
				UNDEFINED                                 // there's no level 0 program so we don't need a name for it
				"Zap 1.0"
				"Zap 2.1"
				"IceBreaker Mk1"
				"Magnum"
				"AK 4.7"
				"Blaster"
				"IceBreaker Mk2"
				"Bazooka"
				"Magnum II"
				"Zap 4.2"
				"Bazooka"
				"CyberDagger"
				"SuperBlaster"
				"Zap 5.0"
				"CyberSword"
				"MegaBlaster"
				"DigiUzi"
				"CyberKatana"
				"IceBreaker Mk3"
				"GigaBlaster"
			effect = FUNCTION (human,thing)
				if human.current_target.structure_type != "ICE"
					print "<#error>Select some ICE before attacking with "+thing.name
				else
					target_number = 10  +  2 * human.target_system.rating  + ICE_RATING_COMBAT(human.current_target) - humanRatingAttack(human) - thing.rating
					if human.current_target.hardened || human.current_target.phasing
						target_number = target_number + 3
					actionHumanAttackICE(ice,thing,target_number)
		THING_TYPE
			type_name = "Area Attack"
			rating = 1
			cost = FUNCTION (thing)
				return_value = 3 * thing.level * thing.level * 25
			size = FUNCTION (thing)
				return_value = 3 * thing.level
			category = ARRAY
				PROGRAM
				ATTACK_PROGRAM
				AREA_ATTACK_PROGRAM
			default_name = ARRAY
				UNDEFINED
				"Grenade 1.0"
				"Logic Bomb I"
				"Grenade 1.5"
				"BugSwarm"
				"Shrapnel 1.0"
				"Fireball 1.2"
				"Scattergun"
				"Grenade 2.0"
				"BugSwarm II"
				"Logic Bomb II"
				"Shrapnel 3.0"
				"Grenade 3.0"
				"Fireball 3.1"
				"Logic Bomb III"
				"BugSwarm III"
				"Grenade 4.0"
				"Logic Bomb IV"
				"EMP"
				"Logic Bomb V"
				"Nuke"
		THING_TYPE
			type_name = "Piercing Attack"
			rating = 1
			category = ARRAY
				PROGRAM
				ATTACK_PROGRAM
				PIERCING_ATTACK_PROGRAM
			cost = FUNCTION (thing)
				return_value = 3 * thing.level * thing.level * 25
			size = FUNCTION (thing)
				return_value = 3 * thing.level
			default_name = ARRAY
				UNDEFINED
				"Spear 1.0a"
				"Crossbow"
				"Laser 1.1"
				"Javelin 1.0"
				"Scalpel"
				"Drill 2.2"
				"IcePick 1.3"
				"FMJ"
				"Teflon"
				"Stiletto 1.1.0"
				"Awl 1.0"
				"Drill 3.1"
				"Scalpel II"
				"IcePick 2.0"
				"Laser 4.0"
				"IcePick 2.3"
				"Drill 4.0"
				"Laser 5.1"
				"IcePick 3.0"
				"Shredder"